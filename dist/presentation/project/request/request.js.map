{"version":3,"sources":["../../../../src/presentation/project/request/request.ts"],"sourcesContent":["import { ApiProperty, PartialType } from '@nestjs/swagger';\nimport { Transform } from 'class-transformer';\nimport {\n  ArrayNotEmpty,\n  IsArray,\n  IsDateString,\n  IsEnum,\n  IsNotEmpty,\n  IsOptional,\n  IsString,\n  IsUrl,\n  IsUUID,\n  Matches,\n  MaxLength,\n  ValidateIf,\n} from 'class-validator';\n\nimport { ICreateProjectRequest } from '../../../application/interface';\n\nexport class ProjectCreateRequest implements ICreateProjectRequest {\n  @ApiProperty({\n    title: 'Project Name',\n  })\n  @IsString()\n  @MaxLength(256)\n  @IsNotEmpty()\n  @Transform(({ value }) => value?.trim())\n  project_name: string;\n\n  @ApiProperty({\n    title: 'Customer ID',\n    description: 'UUIDv7',\n  })\n  @IsUUID(7, { message: 'customer_id must be UUIDv7' })\n  @IsString()\n  customer_id: string;\n\n  @ApiProperty({\n    title: 'Contractor ID',\n    description: 'UUIDv7',\n  })\n  @IsUUID(7, { message: 'contractor_id must be UUIDv7' })\n  @IsString()\n  contractor_id: string;\n\n  @ApiProperty({\n    title: 'Project Type',\n    description: 'Enum',\n    enum: [\n      'zaikou',\n      'han_zaikou',\n      'jouyou',\n      'tema_uke',\n      'kouji_uke',\n      'isshiki',\n    ],\n  })\n  @IsEnum(\n    ['zaikou', 'han_zaikou', 'jouyou', 'tema_uke', 'kouji_uke', 'isshiki'],\n    {\n      message:\n        \"project_type must be one of the following values: ['zaikou', 'han_zaikou', 'jouyou', 'tema_uke', 'kouji_uke', 'isshiki']\",\n    },\n  )\n  project_type: string;\n\n  @ApiProperty({\n    title: 'Project member ID',\n    description: 'UUIDv7',\n  })\n  @IsUUID(7, { message: 'project_member_id must be UUIDv7' })\n  @IsString()\n  project_member_id: string;\n\n  @ApiProperty({\n    title: 'Construction start',\n    format: 'yyyy-MM-dd',\n    required: false,\n  })\n  @IsDateString({ strict: true })\n  @IsOptional()\n  construction_start?: string;\n\n  @ApiProperty({\n    title: 'Construction Stop',\n    format: 'yyyy-MM-dd',\n    required: false,\n  })\n  @IsDateString({ strict: true })\n  @IsOptional()\n  construction_stop?: string;\n\n  @ApiProperty({\n    title: 'Construction scale',\n    description: `\n- Must be positive\n- Must be Decimal(15,1)\n`,\n    required: false,\n  })\n  @IsOptional()\n  @Matches(/^\\d{1,14}(\\.\\d)?$/, {\n    message: 'construction_scale must be Decimal(15,1)',\n  })\n  construction_scale?: string;\n\n  @ApiProperty({\n    title: 'Budget',\n    description: `\n- Must be positive\n- Must be Decimal(64,3)\n`,\n    required: false,\n  })\n  @IsOptional()\n  @Matches(/^\\d{1,61}(\\.\\d{1,3})?$/, {\n    message: 'budget must be Decimal(64,3)',\n  })\n  budget?: string;\n\n  @ApiProperty({\n    title: 'Project postal code',\n  })\n  @MaxLength(7)\n  @IsNotEmpty()\n  @Transform(({ value }) => value?.trim())\n  project_postal_code: string;\n\n  @ApiProperty({\n    title: 'Project province',\n  })\n  @MaxLength(256)\n  @IsNotEmpty()\n  @Transform(({ value }) => value?.trim())\n  project_province: string;\n\n  @ApiProperty({\n    title: 'Project address',\n  })\n  @MaxLength(256)\n  @IsNotEmpty()\n  @Transform(({ value }) => value?.trim())\n  project_address: string;\n\n  @ApiProperty({\n    title: 'Total man works',\n    description: `\n- Must be positive\n- Must be Decimal(10,2)\n`,\n    required: false,\n  })\n  @IsOptional()\n  @Matches(/^\\d{1,8}(\\.\\d{1,2})?$/, {\n    message: 'total_man_works must be Decimal(10,2)',\n  })\n  total_man_works?: string;\n\n  @ApiProperty({\n    title: 'Contract type',\n    description: 'Enum',\n    enum: ['first_tier', 'second_tier', 'third_tier_and_below'],\n  })\n  @IsEnum(['first_tier', 'second_tier', 'third_tier_and_below'], {\n    message:\n      \"contract_type must be one of the following values: ['first_tier', 'second_tier', 'third_tier_and_below']\",\n  })\n  contract_type: string;\n\n  @ApiProperty({\n    title: 'Construction type IDs',\n    description: 'Enum',\n    enum: [\n      'general_civil_engineering_work',\n      'general_building_work',\n      'carpentry_work',\n      'plastering_work',\n      'scaffolding_work_earth_work_and_concret_work',\n      'masonry_work',\n    ],\n    isArray: true,\n  })\n  @IsEnum(\n    [\n      'general_civil_engineering_work',\n      'general_building_work',\n      'carpentry_work',\n      'plastering_work',\n      'scaffolding_work_earth_work_and_concret_work',\n      'masonry_work',\n    ],\n    {\n      message:\n        'construction_types must be one of the following values: [\"general_civil_engineering_work\", \"general_building_work\", \"carpentry_work\", \"plastering_work\", \"scaffolding_work_earth_work_and_concret_work\", \"masonry_work\"]',\n      each: true,\n    },\n  )\n  @IsArray()\n  @ArrayNotEmpty()\n  construction_types: string[];\n\n  @ApiProperty({\n    title: 'Material',\n    description: 'Enum',\n    enum: ['ALC', 'ECP'],\n    isArray: true,\n  })\n  @IsEnum(['ALC', 'ECP'], {\n    message: \"materials must be one of the following values: ['ALC', 'ECP']\",\n    each: true,\n  })\n  @IsArray()\n  @ArrayNotEmpty()\n  materials: string[];\n\n  @ApiProperty({\n    title: 'Image',\n    description: 'Project image',\n    required: false,\n  })\n  @MaxLength(400)\n  @IsUrl()\n  @IsOptional()\n  image_url?: string;\n\n  @ApiProperty({\n    title: 'Remarks',\n    required: false,\n  })\n  @IsOptional()\n  @IsString()\n  description?: string;\n\n  @ApiProperty({\n    title: 'Project work status name',\n    required: false,\n    enum: [\n      'NOT_STARTED',\n      'DESIGN_IN_PROGRESS',\n      'START_AT_NEXT_MONTH',\n      'IN_PROGRESS_AT_SITE',\n      'CONSTRUCTION_COMPLETE',\n      'MONTHLY_REPORT_COMPLETE',\n      'PAYMENT_RECEIVED',\n      'ABORTED',\n      'DELETED',\n    ],\n  })\n  @IsOptional()\n  @IsEnum(\n    [\n      'NOT_STARTED',\n      'DESIGN_IN_PROGRESS',\n      'START_AT_NEXT_MONTH',\n      'IN_PROGRESS_AT_SITE',\n      'CONSTRUCTION_COMPLETE',\n      'MONTHLY_REPORT_COMPLETE',\n      'PAYMENT_RECEIVED',\n      'ABORTED',\n      'DELETED',\n    ],\n    {\n      message:\n        \"project_work_status_name must be one of the following values: ['NOT_STARTED', 'DESIGN_IN_PROGRESS', 'START_AT_NEXT_MONTH', 'IN_PROGRESS_AT_SITE', 'CONSTRUCTION_COMPLETE', 'MONTHLY_REPORT_COMPLETE', 'PAYMENT_RECEIVED', 'ABORTED', 'DELETED']\",\n    },\n  )\n  project_work_status_name?: string;\n}\n\nexport class ProjectUpdateRequest extends PartialType(ProjectCreateRequest) {\n  @ApiProperty({\n    title: 'Project work status reason',\n    required: false,\n  })\n  @IsString()\n  @IsNotEmpty()\n  @Transform(({ value }) => value?.trim())\n  @ValidateIf(\n    ({ project_work_status_name }) => project_work_status_name !== undefined,\n  )\n  project_work_status_reason?: string;\n\n  @ApiProperty({\n    title: 'Project work status name',\n    required: false,\n    enum: [\n      'NOT_STARTED',\n      'DESIGN_IN_PROGRESS',\n      'START_AT_NEXT_MONTH',\n      'IN_PROGRESS_AT_SITE',\n      'CONSTRUCTION_COMPLETE',\n      'MONTHLY_REPORT_COMPLETE',\n      'PAYMENT_RECEIVED',\n      'ABORTED',\n      'DELETED',\n    ],\n  })\n  @IsNotEmpty()\n  @IsEnum(\n    [\n      'NOT_STARTED',\n      'DESIGN_IN_PROGRESS',\n      'START_AT_NEXT_MONTH',\n      'IN_PROGRESS_AT_SITE',\n      'CONSTRUCTION_COMPLETE',\n      'MONTHLY_REPORT_COMPLETE',\n      'PAYMENT_RECEIVED',\n      'ABORTED',\n      'DELETED',\n    ],\n    {\n      message:\n        \"project_work_status_name must be one of the following values: ['NOT_STARTED', 'DESIGN_IN_PROGRESS', 'START_AT_NEXT_MONTH', 'IN_PROGRESS_AT_SITE', 'CONSTRUCTION_COMPLETE', 'MONTHLY_REPORT_COMPLETE', 'PAYMENT_RECEIVED', 'ABORTED', 'DELETED']\",\n    },\n  )\n  @ValidateIf(\n    ({ project_work_status_reason }) =>\n      project_work_status_reason !== undefined,\n  )\n  project_work_status_name?: string;\n\n  @ApiProperty({\n    title: 'Project contract status reason',\n    required: false,\n  })\n  @IsNotEmpty()\n  @IsString()\n  @Transform(({ value }) => value?.trim())\n  @ValidateIf(\n    ({ project_contract_status_name }) =>\n      project_contract_status_name !== undefined,\n  )\n  project_contract_status_reason?: string;\n\n  @ApiProperty({\n    title: 'Project contract status name',\n    required: false,\n    enum: ['NEW', 'SIGNED', 'CANCELED'],\n  })\n  @IsNotEmpty()\n  @IsEnum(['NEW', 'SIGNED', 'CANCELED'], {\n    message:\n      \"project_contract_status_name must be one of the following values: ['NEW', 'SIGNED', 'CANCELED']\",\n  })\n  @ValidateIf(\n    ({ project_contract_status_reason }) =>\n      project_contract_status_reason !== undefined,\n  )\n  project_contract_status_name?: string;\n}\n"],"names":["ApiProperty","PartialType","Transform","ArrayNotEmpty","IsArray","IsDateString","IsEnum","IsNotEmpty","IsOptional","IsString","IsUrl","IsUUID","Matches","MaxLength","ValidateIf","ProjectCreateRequest","title","value","trim","description","message","enum","format","required","strict","isArray","each","ProjectUpdateRequest","project_work_status_name","undefined","project_work_status_reason","project_contract_status_name","project_contract_status_reason"],"mappings":";;;;;;;;;AAAA,SAASA,WAAW,EAAEC,WAAW,QAAQ,kBAAkB;AAC3D,SAASC,SAAS,QAAQ,oBAAoB;AAC9C,SACEC,aAAa,EACbC,OAAO,EACPC,YAAY,EACZC,MAAM,EACNC,UAAU,EACVC,UAAU,EACVC,QAAQ,EACRC,KAAK,EACLC,MAAM,EACNC,OAAO,EACPC,SAAS,EACTC,UAAU,QACL,kBAAkB;AAIzB,OAAO,MAAMC;AAwPb;;;QAtPIC,OAAO;;;;;eAKG,EAAEC,KAAK,EAAE,GAAKA,OAAOC;;;;;QAI/BF,OAAO;QACPG,aAAa;;;QAEFC,SAAS;;;;;;;QAKpBJ,OAAO;QACPG,aAAa;;;QAEFC,SAAS;;;;;;;QAKpBJ,OAAO;QACPG,aAAa;QACbE,MAAM;YACJ;YACA;YACA;YACA;YACA;YACA;SACD;;;QAGA;QAAU;QAAc;QAAU;QAAY;QAAa;;QAE1DD,SACE;;;;;;QAMJJ,OAAO;QACPG,aAAa;;;QAEFC,SAAS;;;;;;;QAKpBJ,OAAO;QACPM,QAAQ;QACRC,UAAU;;;QAEIC,QAAQ;;;;;;;QAKtBR,OAAO;QACPM,QAAQ;QACRC,UAAU;;;QAEIC,QAAQ;;;;;;;QAKtBR,OAAO;QACPG,aAAa,CAAC;;;AAGlB,CAAC;QACGI,UAAU;;;;QAIVH,SAAS;;;;;;QAKTJ,OAAO;QACPG,aAAa,CAAC;;;AAGlB,CAAC;QACGI,UAAU;;;;QAIVH,SAAS;;;;;;QAKTJ,OAAO;;;;eAIG,EAAEC,KAAK,EAAE,GAAKA,OAAOC;;;;;QAI/BF,OAAO;;;;eAIG,EAAEC,KAAK,EAAE,GAAKA,OAAOC;;;;;QAI/BF,OAAO;;;;eAIG,EAAEC,KAAK,EAAE,GAAKA,OAAOC;;;;;QAI/BF,OAAO;QACPG,aAAa,CAAC;;;AAGlB,CAAC;QACGI,UAAU;;;;QAIVH,SAAS;;;;;;QAKTJ,OAAO;QACPG,aAAa;QACbE,MAAM;YAAC;YAAc;YAAe;SAAuB;;;QAEpD;QAAc;QAAe;;QACpCD,SACE;;;;;;QAKFJ,OAAO;QACPG,aAAa;QACbE,MAAM;YACJ;YACA;YACA;YACA;YACA;YACA;SACD;QACDI,SAAS;;;QAIP;QACA;QACA;QACA;QACA;QACA;;QAGAL,SACE;QACFM,MAAM;;;;;;;;QAQRV,OAAO;QACPG,aAAa;QACbE,MAAM;YAAC;YAAO;SAAM;QACpBI,SAAS;;;QAEF;QAAO;;QACdL,SAAS;QACTM,MAAM;;;;;;;;QAONV,OAAO;QACPG,aAAa;QACbI,UAAU;;;;;;;;;QAQVP,OAAO;QACPO,UAAU;;;;;;;;QAOVP,OAAO;QACPO,UAAU;QACVF,MAAM;YACJ;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;SACD;;;;QAKC;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAGAD,SACE;;;;AAMR,OAAO,MAAMO,6BAA6B1B,YAAYc;AAgFtD;;;QA9EIC,OAAO;QACPO,UAAU;;;;eAIA,EAAEN,KAAK,EAAE,GAAKA,OAAOC;gBAE9B,EAAEU,wBAAwB,EAAE,GAAKA,6BAA6BC;;;;;QAK/Db,OAAO;QACPO,UAAU;QACVF,MAAM;YACJ;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;SACD;;;;QAKC;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAGAD,SACE;;gBAIH,EAAEU,0BAA0B,EAAE,GAC7BA,+BAA+BD;;;;;QAKjCb,OAAO;QACPO,UAAU;;;;eAIA,EAAEN,KAAK,EAAE,GAAKA,OAAOC;gBAE9B,EAAEa,4BAA4B,EAAE,GAC/BA,iCAAiCF;;;;;QAKnCb,OAAO;QACPO,UAAU;QACVF,MAAM;YAAC;YAAO;YAAU;SAAW;;;;QAG5B;QAAO;QAAU;;QACxBD,SACE;;gBAGD,EAAEY,8BAA8B,EAAE,GACjCA,mCAAmCH"}